model BackInStockNotification {
  id            String    @id
  productId     String
  companyId     String
  customerName  String
  customerEmail String?
  customerPhone String?
  notifyEmail   Boolean   @default(true)
  notifySMS     Boolean   @default(false)
  isNotified    Boolean   @default(false)
  notifiedAt    DateTime?
  createdAt     DateTime  @default(now())
  company     Company   @relation(fields: [companyId], references: [id], onDelete: Cascade)
  product      Product   @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([companyId])
  @@index([isNotified])
  @@index([productId])
  @@map("back_in_stock_notifications")
}

/// UNUSED - Legacy feature
model StockAlert {
  id              String              @id
  type            StockAlertType
  priority        StockAlertsPriority
  productId       String
  productName     String
  warehouseId     String
  warehouseName   String
  message         String
  currentStock    Int?
  reorderPoint    Int?
  reorderQuantity Int?
  isRead          Boolean             @default(false)
  createdAt       DateTime            @default(now())
  product        Product             @relation(fields: [productId], references: [id], onDelete: Cascade)
  warehouse       Warehouse           @relation(fields: [warehouseId], references: [id], onDelete: Cascade)

  @@index([isRead])
  @@index([priority])
  @@index([productId])
  @@index([warehouseId])
  @@map("stock_alerts")
}

model StockMovement {
  id          String               @id
  productId   String
  warehouseId String
  type        StockMovementType
  reason      StockMovementsReason
  quantity    Int
  cost        Decimal?             @db.Decimal(10, 2)
  reference   String?
  notes       String?
  userId      String?
  userName    String?
  createdAt   DateTime             @default(now())
  approvedAt  DateTime?
  approvedBy  String?
  batchNumber String?
  expiryDate  DateTime?
  isApproved  Boolean              @default(true)
  product    Product              @relation(fields: [productId], references: [id], onDelete: Cascade)
  warehouse   Warehouse            @relation(fields: [warehouseId], references: [id], onDelete: Cascade)

  @@index([createdAt])
  @@index([productId])
  @@index([warehouseId])
  @@map("stock_movements")
}

/// UNUSED - Legacy feature
model TaskCategory {
  id          String   @id
  name        String
  description String?
  color       String   @default("#6366f1")
  icon        String?
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  companyId   String
  createdAt   DateTime @default(now())
  updatedAt   DateTime
  company   Company  @relation(fields: [companyId], references: [id], onDelete: Cascade)
  tasks       Task[]

  @@unique([companyId, name])
  @@index([companyId])
  @@index([isActive])
  @@map("task_categories")
}

/// UNUSED - Legacy feature
model Warehouse {
  id             String          @id
  name           String
  location       String?
  type           String          @default("main")
  capacity       Int?
  isActive       Boolean         @default(true)
  companyId      String
  createdAt      DateTime        @default(now())
  updatedAt      DateTime
  inventories    Inventory[]
  stockAlerts    StockAlert[]
  stockMovements StockMovement[]
  company      Company         @relation(fields: [companyId], references: [id], onDelete: Cascade)

  @@index([companyId])
  @@map("warehouses")
}

model WoocommerceSettings {
  id                  String    @id
  companyId           String    @unique
  storeUrl            String
  consumerKey         String    @db.Text
  consumerSecret      String    @db.Text
  syncEnabled         Boolean   @default(false)
  syncDirection       String    @default("both")
  syncInterval        Int       @default(15)
  webhookSecret       String?   @db.Text
  webhookEnabled      Boolean   @default(false)
  webhookOrderCreated String?
  webhookOrderUpdated String?
  statusMapping       String?   @db.Text
  lastSyncAt          DateTime?
  lastSyncStatus      String?   @default("never")
  lastSyncMessage     String?   @db.Text
  isActive            Boolean   @default(true)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime
  company           Company   @relation(fields: [companyId], references: [id], onDelete: Cascade)

  @@map("woocommerce_settings")
}

model WoocommerceSyncLog {
  id            String    @id
  companyId     String
  syncType      String
  syncDirection String
  status        String
  totalItems    Int       @default(0)
  successCount  Int       @default(0)
  failedCount   Int       @default(0)
  skippedCount  Int       @default(0)
  errorMessage  String?   @db.Text
  errorDetails  String?   @db.Text
  startedAt     DateTime  @default(now())
  completedAt   DateTime?
  duration      Int?
  triggeredBy   String?
  metadata      String?   @db.Text
  company     Company   @relation(fields: [companyId], references: [id], onDelete: Cascade)

  @@index([companyId])
  @@index([startedAt])
  @@index([status])
  @@index([syncType])
  @@map("woocommerce_sync_logs")
}

/// UNUSED - Planned feature for purchase management
model PurchaseInvoiceItem {
  id                String          @id
  purchaseInvoiceId String
  productId         String?
  productName       String
  description       String?         @db.Text
  quantity          Decimal         @db.Decimal(10, 2)
  unitPrice         Decimal         @db.Decimal(12, 2)
  taxRate           Decimal         @default(0.00) @db.Decimal(5, 2)
  discountRate      Decimal         @default(0.00) @db.Decimal(5, 2)
  totalPrice        Decimal         @db.Decimal(12, 2)
  notes             String?         @db.Text
  createdAt         DateTime        @default(now())
  updatedAt         DateTime
  product          Product?        @relation(fields: [productId], references: [id])
  purchaseInvoice   PurchaseInvoice @relation(fields: [purchaseInvoiceId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@index([purchaseInvoiceId])
  @@map("purchase_invoice_items")
}

/// UNUSED - Planned feature for purchase management
model PurchaseInvoice {
  id                   String                 @id
  companyId            String
  supplierId           String
  purchaseOrderId      String?
  invoiceNumber        String                 @unique
  invoiceDate          DateTime               @default(now())
  dueDate              DateTime?
  status               PurchaseInvoicesStatus @default(PENDING)
  subtotal             Decimal                @db.Decimal(12, 2)
  taxAmount            Decimal                @default(0.00) @db.Decimal(12, 2)
  discountAmount       Decimal                @default(0.00) @db.Decimal(12, 2)
  shippingCost         Decimal                @default(0.00) @db.Decimal(12, 2)
  totalAmount          Decimal                @db.Decimal(12, 2)
  paidAmount           Decimal                @default(0.00) @db.Decimal(12, 2)
  remainingAmount      Decimal                @db.Decimal(12, 2)
  currency             String                 @default("EGP")
  notes                String?                @db.Text
  attachments          String?                @db.Text
  createdBy            String
  createdAt            DateTime               @default(now())
  updatedAt            DateTime
  purchaseInvoiceItems PurchaseInvoiceItem[]
  company            Company                @relation(fields: [companyId], references: [id], onDelete: Cascade)
  purchaseOrder        PurchaseOrder?         @relation(fields: [purchaseOrderId], references: [id])
  supplier             Supplier               @relation(fields: [supplierId], references: [id])
  supplierPayments     SupplierPayment[]

  @@index([companyId])
  @@index([invoiceDate])
  @@index([purchaseOrderId])
  @@index([status])
  @@index([supplierId])
  @@map("purchase_invoices")
}

/// UNUSED - Planned feature for purchase management
model PurchaseOrderItem {
  id               String        @id
  purchaseOrderId  String
  productId        String?
  productName      String
  description      String?       @db.Text
  quantity         Decimal       @db.Decimal(10, 2)
  unitPrice        Decimal       @db.Decimal(12, 2)
  taxRate          Decimal       @default(0.00) @db.Decimal(5, 2)
  discountRate     Decimal       @default(0.00) @db.Decimal(5, 2)
  totalPrice       Decimal       @db.Decimal(12, 2)
  receivedQuantity Decimal       @default(0.00) @db.Decimal(10, 2)
  notes            String?       @db.Text
  createdAt        DateTime      @default(now())
  updatedAt        DateTime
  product         Product?      @relation(fields: [productId], references: [id])
  purchaseOrder    PurchaseOrder @relation(fields: [purchaseOrderId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@index([purchaseOrderId])
  @@map("purchase_order_items")
}

/// UNUSED - Planned feature for purchase management
model PurchaseOrder {
  id                 String               @id
  companyId          String
  supplierId         String
  orderNumber        String               @unique
  orderDate          DateTime             @default(now())
  expectedDelivery   DateTime?
  status             PurchaseOrdersStatus @default(DRAFT)
  subtotal           Decimal              @db.Decimal(12, 2)
  taxAmount          Decimal              @default(0.00) @db.Decimal(12, 2)
  discountAmount     Decimal              @default(0.00) @db.Decimal(12, 2)
  shippingCost       Decimal              @default(0.00) @db.Decimal(12, 2)
  totalAmount        Decimal              @db.Decimal(12, 2)
  currency           String               @default("EGP")
  paymentTerms       String?              @db.Text
  notes              String?              @db.Text
  attachments        String?              @db.Text
  receivedDate       DateTime?
  approvedBy         String?
  approvedAt         DateTime?
  createdBy          String
  createdAt          DateTime             @default(now())
  updatedAt          DateTime
  purchaseInvoices   PurchaseInvoice[]
  purchaseOrderItems PurchaseOrderItem[]
  company          Company              @relation(fields: [companyId], references: [id], onDelete: Cascade)
  supplier           Supplier             @relation(fields: [supplierId], references: [id])

  @@index([companyId])
  @@index([orderDate])
  @@index([status])
  @@index([supplierId])
  @@map("purchase_orders")
}

/// UNUSED - Planned feature for supplier management
model SupplierPayment {
  id                String                        @id
  companyId         String
  supplierId        String
  purchaseInvoiceId String?
  paymentNumber     String                        @unique
  paymentDate       DateTime                      @default(now())
  amount            Decimal                       @db.Decimal(12, 2)
  paymentMethod     SupplierPaymentsPaymentMethod
  referenceNumber   String?
  bankName          String?
  checkNumber       String?
  checkDate         DateTime?
  notes             String?                       @db.Text
  attachments       String?                       @db.Text
  createdBy         String
  createdAt         DateTime                      @default(now())
  updatedAt         DateTime
  company         Company                       @relation(fields: [companyId], references: [id], onDelete: Cascade)
  purchaseInvoice   PurchaseInvoice?              @relation(fields: [purchaseInvoiceId], references: [id])
  supplier          Supplier                      @relation(fields: [supplierId], references: [id])

  @@index([companyId])
  @@index([paymentDate])
  @@index([purchaseInvoiceId])
  @@index([supplierId])
  @@map("supplier_payments")
}

/// UNUSED - Planned feature for supplier management
model Supplier {
  id                 String            @id
  companyId          String
  name               String
  contactPerson      String?
  email              String?
  phone              String?
  mobile             String?
  address            String?           @db.Text
  city               String?
  country            String?           @default("Egypt")
  taxNumber          String?
  commercialRegister String?
  paymentTerms       String?           @db.Text
  creditLimit        Decimal?          @db.Decimal(12, 2)
  currentBalance     Decimal           @default(0.00) @db.Decimal(12, 2)
  rating             Int?              @default(0)
  notes              String?           @db.Text
  isActive           Boolean           @default(true)
  createdAt          DateTime          @default(now())
  updatedAt          DateTime
  createdBy          String?
  purchaseInvoices   PurchaseInvoice[]
  purchaseOrders     PurchaseOrder[]
  supplierPayments   SupplierPayment[]
  company          Company           @relation(fields: [companyId], references: [id], onDelete: Cascade)

  @@index([companyId])
  @@index([isActive])
  @@map("suppliers")
}
